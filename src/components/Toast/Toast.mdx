import { Meta, Canvas, ArgTypes, Story, Primary } from '@storybook/blocks';
import * as ToastStories from './Toast.stories';
import { Toast } from './Toast';

<Meta of={ToastStories} />

<SectionHeader
  title="Toast"
  sections={[
    { title: 'Overview', href: '#overview' },
    { title: 'Props', href: '#props' },
    { title: 'Usage', href: '#usage' },
    { title: 'Variants', href: '#variants' },
    { title: 'Actions', href: '#actions' },
    { title: 'Advanced', href: '#advanced' },
  ]}
/>

## Overview

Toasts are temporary messages that inform users of a process that an app has performed or will perform without disrupting their workflow

<Canvas of={ToastStories.Neutral} />

## API Reference

### `toast(content, options)`

The primary way to display toast notifications is through the `toast()` function.

#### Parameters

| Parameter | Type                  | Description                                                 |
| --------- | --------------------- | ----------------------------------------------------------- |
| `content` | `string \| ReactNode` | The message or custom content to display in the toast       |
| `options` | `ToastOptions`        | Configuration options for the toast behavior and appearance |

#### Toast Options

| Option                | Type                                                                | Default     | Description                                                      |
| --------------------- | ------------------------------------------------------------------- | ----------- | ---------------------------------------------------------------- |
| `status`              | `'neutral' \| 'informational' \| 'error' \| 'warning' \| 'success'` | `'neutral'` | Visual style and semantic meaning of the toast                   |
| `actions`             | `ReactNode \| ReactNode[]`                                          | `undefined` | Action elements (links or buttons) to display in the toast       |
| `isDismissible`       | `boolean`                                                           | `true`      | Whether users can manually close the toast                       |
| `shouldCloseOnAction` | `boolean`                                                           | `false`     | Whether the toast closes automatically when an action is clicked |
| `timeout`             | `number`                                                            | `5000`      | Time in milliseconds before auto-dismissal (1000-10000)          |
| `onClose`             | `() => void`                                                        | `undefined` | Callback fired when the toast is closed                          |

#### Return Value

Returns a unique toast ID that can be used with `toast.dismiss(id)` for programmatic control.

#### Usage Examples

```javascript
// Basic usage
toast('Operation completed successfully');

// With status
toast('Something went wrong', { status: 'error' });

// With actions
toast('File uploaded', {
  status: 'success',
  actions: <Link>View file</Link>,
});

// With multiple actions
toast('Confirm this action', {
  actions: [<Button type="tertiary">Cancel</Button>, <Button>Confirm</Button>],
});

// Controlled toast
const toastId = toast('Processing...', {
  onClose: () => console.log('Toast closed'),
});

// Dismiss programmatically
toast.dismiss(toastId);
```

### `<ToastContainer />`

The container component that manages toast positioning and rendering.

| Prop        | Type                              | Default          | Description                               |
| ----------- | --------------------------------- | ---------------- | ----------------------------------------- |
| `placement` | `'bottom left' \| 'bottom right'` | `'bottom right'` | Position of the toast container on screen |

## Usage

<UsageGuidelines
  guidelines={[
    `To provide a contextual message based on a user's actions in the same view the action just took place in.`,
  ]}
  policies={[
    'To communicate an error to a user, use an alert instead.',
    `If it's an irreversible/destructive action, use a dialog instead.`,
    'If a message needs to be communicated after a user visits a new page, use an alert instead.',
    'If you want to promote a feature or communicate additional functionality, use a banner instead.',
  ]}
/>

### Basic Toast

The simplest form of a toast displays a message with neutral styling. Toasts automatically dismiss after a timeout period (default 5 seconds) and can be manually dismissed by users.

<Canvas of={ToastStories.Neutral} />

### Toast Placement

Toasts can be positioned in different corners of the screen using the `placement` prop on the `ToastContainer`. The available options are:

- `bottom right` (default)
- `bottom left`

Configure placement at the container level to affect all toasts in your application.

## Variants

Toast notifications come in different variants to communicate the nature of the message:

### Informational

Use for general information that doesn't require immediate action.

<Canvas of={ToastStories.Informational} />

### Success

Use to confirm successful completion of an action.

<Canvas of={ToastStories.Success} />

### Warning

Use to alert users about potential issues that need attention.

<Canvas of={ToastStories.Warning} />

### Error

Use to communicate errors or failed actions that require user attention.

<Canvas of={ToastStories.Error} />

## Actions

### Single Action

Toasts can include a single action, typically displayed as a link, allowing users to take immediate steps related to the toast message.

<Canvas of={ToastStories.Neutral} />

### Multiple Actions

For more complex scenarios, toasts can include multiple button actions. Use this sparingly and ensure actions are clearly labeled.

<Canvas of={ToastStories.WithButtons} />

### Close on Action

Control whether the toast automatically closes when an action is clicked using the `shouldCloseOnAction` prop.

<Canvas of={ToastStories.ShouldCloseOnAction} />

## Advanced

### Custom Content

Toasts accept both string content and React elements, allowing for custom layouts and icons.

<Canvas of={ToastStories.WithCustomIcon} />

### Controlled Toasts

For advanced use cases, you can programmatically control toast visibility and dismissal.

<Canvas of={ToastStories.Controlled} />

### Playground

Experiment with different configurations using the interactive playground:

<Canvas of={ToastStories.Playground} />
