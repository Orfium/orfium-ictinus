import { Meta, Canvas, ArgTypes } from '@storybook/blocks';
import Table from './Table';
import * as TableStories from './Table.stories';
import {
  DisplayColumnStory,
  ColumnsConfigStory,
  RowsConfigStory,
} from './utils/TableStoryComponents';

<Meta of={TableStories} />

<SectionHeader
  title={'Table'}
  sections={[
    { title: 'Overview', href: '#overview' },
    { title: 'Props', href: '#table-props' },
    { title: 'Usage', href: '#usage' },
    { title: 'Variants', href: '#variants' },
  ]}
/>

## Overview

A universal Table component that applies Orfium basic usages.

## Table Props

<ArgTypes of={Table} />

## DisplayColumn Type

<ArgTypes of={DisplayColumnStory} />

## ColumnsConfig Type

This type includes all the configuration for the columns

<ArgTypes of={ColumnsConfigStory} />

## RowsConfig Type

This type includes all the configuration for the rows

<ArgTypes of={RowsConfigStory} />

<SubsectionHeader title="Variants" />

### Column and Row Sizing

<Tip>In order to adjust the cell height, use the rowSize prop</Tip>

<Tip>
  In order to adjust the cell width, set the width for every column inside the DisplayColumn
  configuration object (value is percentage)
</Tip>

<Canvas of={TableStories.ColumnAndRowSizing} />

### Column Chooser

<Canvas of={TableStories.ColumnChooser} />

### Sorting

In order to sort your table, use the `sorting` prop. This is an object that consists of:

- `sortingColumn` is an array of objects; every object has a `id` key, which indicates the column's id, and a `desc` Boolean, indicating the descending or ascending order.
- `handleSorting` is callback to change the sortingColumn state.
- `isMultiSortable` enables multi-sorting.

<Tip>
  UI-wise, sorting options are shown by hovering on the column head; either by pressing the arrow
  IconButton on the left you can toggle the sorting state (the click order is asc -> desc ->
  no-sorting) or by pressing the more options IconButton on the right of the header.
</Tip>

<Tip>To check the multi sorting feature, enable the isMultiSortable prop through the Controls</Tip>

<Canvas of={TableStories.Sorting} />

### Sticky Header

<Tip>
  In order to create a table with sticky header, use the hasStickyHeader prop and also pass a
  max-height for the tbody though the sx prop
</Tip>

<Canvas of={TableStories.StickyHeader} />

### Row Selection

In order to enable row Selection, do the following steps:

- Use prop `type` = `interactive`.
- Use the `rowsConfig` object prop and more specificaly `rowSelection` and `setRowSelection` keys. The `rowSelection` is an object where the key is the row index (from 0 to rows.length - 1) and value is a boolean indicating if the row is selected. Check the implementation below for more clientInformation.

You can also pass a `defaultAction` and/or `bulkActions` inside the `rowsConfig`, which are visible once at least 1 row is selected.

<Canvas of={TableStories.RowSelection} />

### Row Details

In order to enable row expansion functionality, do the following steps:

1. Inside the `rowsConfig` object prop, use:

- `expanded` prop is an object state indicating which rows are expanded; keys are row IDs and values are booleans (whether is expanded or not)
- `setExpanded` is a state change callback for `expanded`.

2. In `data` prop, use the `details` key for every row.

<Canvas of={TableStories.RowDetails} />
