import { Meta, Story, Preview, Props } from '@storybook/addon-docs';
import { withKnobs, boolean, array, select, text } from '@storybook/addon-knobs';
import Select from './Select';
import Stack from '../storyUtils/Stack';
import { SelectShowcase, MultiSelectShowcase } from '../storyUtils/SelectShowcase';
import EdgeCasesSelectShowcase from '../storyUtils/EdgeCasesSelectShowcase';
import { FIGMA_URL } from '../../utils/common';
const options = [
  { value: 'chocolate', label: 'Chocolate' },
  { value: 'strawberry', label: 'Strawberry' },
  { value: 'banana', label: 'Banana' },
  { value: 'citrus', label: 'Citrus' },
  { value: 'vanilla', label: 'Vanilla', isDisabled: true },
];
const optionsWithHelperInDisabled = [
  { value: 'chocolate', label: 'Chocolate' },
  { value: 'strawberry', label: 'Strawberry' },
  { value: 'banana', label: 'Banana' },
  { value: 'citrus', label: 'Citrus' },
  { value: 'why_Disabled', label: 'Why Disabled?', helperText: 'this is why!', isDisabled: true },
];
const groupOptions = [
  {
    value: 'group1',
    label: 'Group 1',
    options: [
      { value: '1', label: 'Option 1' },
      { value: '2', label: 'Option 2' },
    ],
  },
  {
    value: 'group2',
    label: 'Group 2',
    options: [{ value: '3', label: 'Option 3' }],
  },
  { value: '4', label: 'Option 4' },
  {
    value: 'group5',
    label: 'Group 5',
    options: [
      { value: '5', label: 'Option 7' },
      { value: '6', label: 'Option 8' },
    ],
  },
  {
    value: 'group6',
    label: 'Group 6',
    options: [{ value: '7', label: 'Option 9' }],
  },
];
const defaultValue = options[0];
const defaultGroupValue = { value: '1', label: 'Option 1' };
const handleSelectedOption = (selectedOption) => {
  console.log('On option change', selectedOption);
};

<Meta
  title="Design System/Select"
  component={Select}
  parameters={{
    design: [
      {
        type: 'figma',
        name: 'Select',
        url: `${FIGMA_URL}?node-id=10019%3A116506`,
      },
      {
        type: 'figma',
        name: 'Active',
        url: `${FIGMA_URL}?node-id=10019%3A116507`,
      },
      {
        type: 'figma',
        name: 'Edge cases',
        url: `${FIGMA_URL}?node-id=1879%3A101`,
      },
    ],
  }}
/>

# Select

A universal Select component that is a clickable element that can hold many forms.

# Usage

```js
import { Select } from '@orfium/ictinus';

<Select
  options={[
    { value: 'chocolate', label: 'Chocolate' },
    { value: 'strawberry', label: 'Strawberry' },
  ]}
/>;
```

# Props

<Props of={Select} />

# Simple Select

Simple select component with clearable data and searchable input

<Preview>
  <Story name="Simple Select">
    <Stack>
      <Select
        label={'Flavour'}
        options={options}
        defaultValue={defaultValue}
        handleSelectedOption={handleSelectedOption}
        styleType={'filled'}
      />
      <Select
        label={'Flavour'}
        options={options}
        defaultValue={defaultValue}
        handleSelectedOption={handleSelectedOption}
        styleType={'outlined'}
      />
      <Select
        label={'Flavour'}
        options={options}
        defaultValue={defaultValue}
        handleSelectedOption={handleSelectedOption}
        styleType={'elevated'}
      />
    </Stack>
  </Story>
</Preview>

# Select Sizes

Select available sizes - sizes are based on the select

<Preview>
  <Story name="Select Sizes">
    <Stack>
      <Select
        label={'Flavour'}
        options={options}
        defaultValue={defaultValue}
        handleSelectedOption={handleSelectedOption}
        size={'md'}
        styleType={'outlined'}
      />
      <Select
        label={'Flavour'}
        options={options}
        defaultValue={defaultValue}
        handleSelectedOption={handleSelectedOption}
        size={'sm'}
        styleType={'outlined'}
      />
    </Stack>
  </Story>
</Preview>

# Select Icons

Select with icon options right and left of the text

<Preview>
  <Story name="Select with icon and size">
    <Stack>
      <Select
        label={'Flavour'}
        options={options}
        defaultValue={defaultValue}
        handleSelectedOption={handleSelectedOption}
        size={'md'}
        styleType={'outlined'}
        leftIcon={
          <img
            style={{ background: 'red' }}
            src="https://brandmark.io/logo-rank/random/pepsi.png"
            width="16"
            height="16"
          />
        }
      />
      <Select
        label={'Flavour'}
        options={options}
        defaultValue={defaultValue}
        handleSelectedOption={handleSelectedOption}
        styleType={'outlined'}
        rightIcon={
          <img
            style={{ background: 'red' }}
            src="https://brandmark.io/logo-rank/random/pepsi.png"
            width="16"
            height="16"
          />
        }
      />
      <Select
        label={'Flavour'}
        options={options}
        defaultValue={defaultValue}
        handleSelectedOption={handleSelectedOption}
        styleType={'outlined'}
        rightIcon={
          <img
            style={{ background: 'red' }}
            src="https://brandmark.io/logo-rank/random/pepsi.png"
            width="16"
            height="16"
          />
        }
        leftIcon={
          <img
            style={{ background: 'red' }}
            src="https://brandmark.io/logo-rank/random/pepsi.png"
            width="16"
            height="16"
          />
        }
      />
    </Stack>
  </Story>
</Preview>

# Disabled/Locked Select

Select disabled with label

<Preview>
  <Story name="Disabled/Locked Select">
    <Stack>
      <Select isDisabled label={'Flavour'} options={options} />
      <Select isDisabled label={'Flavour'} options={options} styleType={'outlined'} />
      <Select isDisabled label={'Flavour'} options={options} styleType={'elevated'} />
    </Stack>
    <Stack>
      <Select isLocked label={'Flavour'} options={options} />
      <Select isLocked label={'Flavour'} options={options} styleType={'outlined'} />
      <Select isLocked label={'Flavour'} options={options} styleType={'elevated'} />
    </Stack>
  </Story>
</Preview>

# Select with Label and Statuses

Select with Label and Statuses. Error and Hint are shown below for all 3 types filled, outlined, elevated

<Preview>
  <Story name="Select with label and statuses" parameters={{ decorators: [withKnobs] }}>
    <Stack>
      <Stack>
        <Select
          hintMsg={text('custom error message', 'Error in Select')}
          label={'Label'}
          status={'error'}
          styleType={'filled'}
          options={options}
          defaultValue={defaultValue}
        />
        <Select
          hintMsg={text('custom error message', 'Error in Select')}
          label={'Label'}
          status={'error'}
          styleType={'outlined'}
          options={options}
          defaultValue={defaultValue}
        />
        <Select
          hintMsg={text('custom error message', 'Error in Select')}
          label={'Label'}
          status={'error'}
          styleType={'elevated'}
          options={options}
          defaultValue={defaultValue}
        />
      </Stack>
      <Stack>
        <Select
          hintMsg={text('custom error message', 'Error in Select')}
          label={'Label'}
          status={'hint'}
          options={options}
          styleType={'filled'}
        />
        <Select
          hintMsg={text('custom error message', 'Error in Select')}
          label={'Label'}
          status={'hint'}
          options={options}
          styleType={'outlined'}
        />
        <Select
          hintMsg={text('custom error message', 'Error in Select')}
          label={'Label'}
          status={'hint'}
          options={options}
          styleType={'elevated'}
        />
      </Stack>
    </Stack>
  </Story>
</Preview>

# Select with Highlighted search term

Simple select component where searched term is highlighted in options

<Preview>
  <Story name="Select with Highlight">
    <Stack>
      <Select
        hasHighlightSearch
        label={'Flavour'}
        options={options}
        handleSelectedOption={handleSelectedOption}
        styleType={'filled'}
      />
    </Stack>
  </Story>
</Preview>

# Simple Group Select

Simple select component with grouped data and searchable input

<Preview>
  <Story name="Simple Group Select">
    <Stack>
      <Select
        label={'Group Select'}
        options={groupOptions}
        defaultValue={defaultGroupValue}
        handleSelectedOption={handleSelectedOption}
        styleType={'filled'}
        hasHighlightSearch
      />
    </Stack>
  </Story>
</Preview>

# Not Searchable Select

Not Searchable Select

<Preview>
  <Story name="Not Searchable Select">
    <Stack>
      <Select
        isSearchable={false}
        label={'Flavour'}
        options={options}
        handleSelectedOption={handleSelectedOption}
        styleType={'filled'}
      />
      <Select
        isSearchable={false}
        label={'Flavour'}
        options={options}
        handleSelectedOption={handleSelectedOption}
        styleType={'outlined'}
      />
      <Select
        isSearchable={false}
        label={'Flavour'}
        options={options}
        handleSelectedOption={handleSelectedOption}
        styleType={'elevated'}
      />
    </Stack>
  </Story>
</Preview>

# Disabled option with helper text

Disabled option with helper text

<Preview>
  <Story name="Disabled option with helper text">
    <Stack>
      <Select
        isSearchable={false}
        label={'Flavour'}
        options={optionsWithHelperInDisabled}
        handleSelectedOption={handleSelectedOption}
        styleType={'filled'}
      />
      <Select
        isSearchable={false}
        label={'Flavour'}
        options={optionsWithHelperInDisabled}
        handleSelectedOption={handleSelectedOption}
        styleType={'outlined'}
      />
      <Select
        isSearchable={false}
        label={'Flavour'}
        options={optionsWithHelperInDisabled}
        handleSelectedOption={handleSelectedOption}
        styleType={'elevated'}
      />
    </Stack>
  </Story>
</Preview>

# Select with Async and Loading

Select that support asynchronous fetching, with loading status

<Preview>
  <Story name="Async Select">
    <SelectShowcase />
  </Story>
</Preview>

# Select with Async, Loading and Minimum Characters to Search for

Select that support asynchronous fetching, with loading status

<Preview>
  <Story name="Async Select with min characters">
    <SelectShowcase minCharactersToSearch={3} />
  </Story>
</Preview>

# Select with edge case

Select cases where it gets to minimum and maximum width based on options <br />

1. max width of floating menu to 620 and then ellipsis <br />
2. max width with smaller floating menu content that set to max
3. min size (150px) for both

<Preview>
  <Story name="Select with edge case">
    <EdgeCasesSelectShowcase />
  </Story>
</Preview>

# Multiselect

A Select component with multiple selected options represented as Chips. <br/>

1. To initiate a MultiSelect, the `multi` prop must be set to `true`
2. In this variation the props: `leftIcon` and `size` are deprecated (`size` is always set to `md` by default). <br/>
3. Instead of the `selectedOption` prop we now use the `selectedOptions` prop (with type: `SelectOption[]`) .
4. When in MultiSelect, `onClear` prop refers to the all selected options deletion and `onOptionDelete` prop refers to single option deletion

<Preview>
  <Story name="Multiselect">
    <MultiSelectShowcase />
  </Story>
</Preview>
