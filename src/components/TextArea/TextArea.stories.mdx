import { Meta, Preview, Props, Story } from '@storybook/addon-docs';
import { boolean, select, text, withKnobs, number } from '@storybook/addon-knobs';
import TextArea from './TextArea';
import Stack from '../storyUtils/Stack';
import { FIGMA_URL, Function } from '../../utils/common';
import SectionHeader from '../../storybook/SectionHeader';
import { useState } from 'react';

<Meta
  title="Design System/TextArea"
  component={TextArea}
  parameters={{
    design: [
      {
        name: 'Base Input',
        type: 'figma',
        url: `${FIGMA_URL}?node-id=10019%3A116505`,
      },
      {
        name: 'TextArea',
        type: 'figma',
        url: `${FIGMA_URL}?node-id=10019%3A116508`,
      },
    ],
  }}
/>

<SectionHeader title={'TextArea'} />

- [Overview](#overview)
- [Props](#props)
- [Usage](#usage)
- [Variants](#variants)

# Overview

A universal TextArea component used for the case where large string of text is needed as an input.

## Props

<Props of={TextArea} />

## Usage

<UsageGuidelines
  guidelines={[
    'If you need to enter a short string of text in a single line, use text input instead',
    'TextArea hint may be either text (on the left) or character counter (on the right)',
  ]}
/>

## Variants

### TextArea with labels

TextArea with label, with or without placeholder

<Preview>
  <Story name="TextArea with labels">
    <Stack>
      <TextArea label={'Label'} cols={10} rows={5} isResizeEnabled={false} />
      <TextArea
        label={'Label'}
        cols={10}
        rows={5}
        placeholder={'Placeholder'}
        isResizeEnabled={false}
      />
    </Stack>
  </Story>
</Preview>

### Resizable TextArea

TextArea and how to change size with cols and rows

<Preview>
  <Story name="Resizable TextArea">
    <Stack>
      <TextArea label={'Label'} cols={10} rows={5} />
    </Stack>
  </Story>
</Preview>

### TextArea with Counter

TextArea with maximum characters indicated by a counter.

<Tip>
  TextArea is a controlled component, so in order for the counter to work, the value prop must be
  passed to the component.
</Tip>

<Preview>
  <Story name="TextArea with Counter">
    <Stack>
      <Function>
        {() => {
          const [value, setValue] = useState('');
          const handleChange = (e) => setValue(e.target.value);
          return (
            <TextArea
              label={'Label'}
              value={value}
              onChange={handleChange}
              cols={10}
              rows={5}
              isResizeEnabled={false}
              maxCharacters={10}
            />
          );
        }}
      </Function>
    </Stack>
  </Story>
</Preview>

### TextArea Statuses

TextArea with 3 available statuses: Normal, Error and Read-only.

<Preview>
  <Story name="TextArea Statuses" parameters={{ decorators: [withKnobs] }}>
    <Stack>
      <Stack>
        <TextArea
          label={'Label'}
          cols={10}
          rows={5}
          isResizeEnabled={false}
          status={{
            type: 'normal',
            hintMessage: text('Custom Hint Message', 'Hint in Text Area'),
          }}
        />
        <TextArea
          label={'Label'}
          cols={10}
          rows={5}
          isResizeEnabled={false}
          status={{
            type: 'error',
            hintMessage: text('Custom Error Message', 'Error in Text Area'),
          }}
        />
        <TextArea
          label={'Label'}
          cols={10}
          rows={5}
          isResizeEnabled={false}
          status={{
            type: 'read-only',
          }}
        />
      </Stack>
    </Stack>
  </Story>
</Preview>

### Disabled TextArea

Regular TextArea disabled with label

<Preview>
  <Story name="Disabled TextArea">
    <Stack>
      <TextArea isDisabled label={'Label'} cols={10} rows={5} />
    </Stack>
  </Story>
</Preview>

### Playground

<Preview>
  <Story name="Playground" parameters={{ decorators: [withKnobs] }}>
    <Stack>
      <Function>
        {() => {
          const [value, setValue] = useState('');
          const handleChange = (e) => setValue(e.target.value);
          return (
            <TextArea
              value={value}
              label={text('Label', 'Label')}
              placeholder={text('Placeholder', 'Placeholder')}
              isDisabled={boolean('isDisabled', false)}
              isResizeEnabled={boolean('isResizeEnabled', true)}
              maxCharacters={number('maxCharacters', 0)}
              cols={10}
              rows={5}
              status={{
                type: select('status', ['error', 'normal', 'read-only'], 'normal'),
                hintMessage: text('custom hint message', 'Hint in Text Area'),
              }}
            />
          );
        }}
      </Function>
    </Stack>
  </Story>
</Preview>
