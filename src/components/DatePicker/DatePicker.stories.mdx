import { Meta, Preview, Props, Story } from '@storybook/addon-docs';
import { boolean, select, text, withKnobs } from '@storybook/addon-knobs';
import DatePicker, { extraOptions } from './DatePicker';
import DatePickerShowcase from '../storyUtils/DatePickerShowcase';
import { currentDay } from './utils';
import Stack from '../storyUtils/Stack';
import OverlayComponent from './OverlayComponent';
import { FIGMA_URL, Function } from '../../utils/common';
import { useState } from 'react';
const mockDate = currentDay;
const disableDates = {
  days: [
    mockDate.toDate(),
    mockDate.subtract(1, 'day').toDate(),
    mockDate.subtract(2, 'day').toDate(),
    mockDate.subtract(4, 'day').toDate(),
  ],
};
const options = {
  'Disable days of week (only Monday)': { daysOfWeek: [0, 2, 3, 4, 5, 6] },
  'Disable dates after this day': { after: mockDate },
  'Disable dates before this day': { before: mockDate },
  'Disable dates before and after a date (-/+ 7 days)': {
    before: mockDate.subtract(7, 'day').toDate(),
    after: mockDate.add(7, 'day').toDate(),
  },
  'Enable dates from/to a date (7 days)': {
    before: mockDate.subtract(7, 'day').toDate(),
    after: mockDate.add(7, 'day').toDate(),
  },
  'Array of disabled dates(Today, last 2 days, and the 4th day to today)': disableDates,
};
const dateFormatOptions = {
  "Enables system's locale format": undefined,
  'MM/DD/YYYY': 'MM/DD/YYYY',
  'DD/MM/YYYY': 'DD/MM/YYYY',
  'MMMM D, YYYY': 'MMMM D, YYYY',
  'dddd, MMMM D, YYYY': 'dddd, MMMM D, YYYY',
  'M/D/YYYY': 'M/D/YYYY',
  'MMM D, YYYY': 'MMM D, YYYY',
  'ddd, MMM D, YYYY': 'ddd, MMM D, YYYY',
  'DD MMM YYYY': 'DD MMM YYYY',
};
const rangePickerOptions = [true, false];
const filterTypeOptions = ['preset', 'added'];

<Meta
  title="Design System/DatePicker"
  component={DatePicker}
  parameters={{
    design: [
      {
        type: 'figma',
        name: 'Dates',
        url: `${FIGMA_URL}?node-id=1637%3A37861`,
      },
      {
        type: 'figma',
        name: 'DatePicker',
        url: `${FIGMA_URL}?node-id=10283%3A104356`,
      },
    ],
  }}
/>

# DatePicker

A universal DatePicker component to select and style the icons encapsulated in the design system.

# Usage

```js
import { DatePicker } from '@orfium/ictinus';

<DatePicker disableFutureDates={false} disableFutureDates={false} onChange={console.log} />;
```

# Props

<Props of={DatePicker} />

# Calendar

Implementation of both of our types DatePicker(range) and DayPicker

<Preview>
  <Story name="Calendar" parameters={{ decorators: [withKnobs] }}>
    <Stack vertical>
      <div style={{ backgroundColor: 'white' }}>
        <OverlayComponent
          isRangePicker
          extraOptions={extraOptions}
          selectedDays={{
            from: mockDate.add(1, 'day'),
            to: mockDate.add(44, 'day'),
          }}
          onDaySelect={() => {}}
        />
        <OverlayComponent
          isRangePicker
          selectedDays={{
            from: mockDate.add(1, 'day'),
            to: mockDate.add(44, 'day'),
          }}
          onDaySelect={() => {}}
        />
        <OverlayComponent
          selectedDays={{
            from: mockDate.add(1, 'day'),
            to: mockDate.add(1, 'day'),
          }}
          onDaySelect={() => {}}
        />
      </div>
    </Stack>
  </Story>
</Preview>

# DatePicker

Implementation of the regular Range DatePicker on different sizes

<Preview>
  <Story name="DatePicker Range" parameters={{ decorators: [withKnobs] }}>
    <Stack vertical>
      <Function>
        {() => {
          const [date, setDate] = useState({ from: undefined, to: undefined });
          const inputProps = { size: 'md', styleType: 'outlined' };
          return (
            <DatePicker
              inputProps={inputProps}
              isRangePicker
              value={date}
              onChange={setDate}
              isClearable={true}
              disableDates={select('disableDates', options, options[0])}
              dateFormatOverride={select('dateFormat', dateFormatOptions, dateFormatOptions[1])}
            />
          );
        }}
      </Function>
      <Function>
        {() => {
          const [date, setDate] = useState({ from: currentDay.toDate(), to: currentDay.toDate() });
          const inputProps = { size: 'sm', styleType: 'outlined' };
          return (
            <DatePicker
              inputProps={inputProps}
              isRangePicker
              value={date}
              onChange={setDate}
              isClearable={true}
              disableDates={select('disableDates', options, options[0])}
              dateFormatOverride={select('dateFormat', dateFormatOptions, dateFormatOptions[1])}
            />
          );
        }}
      </Function>
    </Stack>
  </Story>
</Preview>

# DatePicker with Filter

Implementation of the DatePicker with a Filter instead of a Select

<Preview>
  <Story name="DatePicker with Filter" parameters={{ decorators: [withKnobs] }}>
    <Stack vertical>
      <Function>
        {() => {
          const [date, setDate] = useState({ from: undefined, to: undefined });
          const inputProps = { size: 'sm', styleType: 'outlined' };
          return (
            <DatePicker
              isRangePicker={select('isRangePicker', rangePickerOptions, rangePickerOptions[0])}
              filterConfig={{
                filterType: select('filterType', filterTypeOptions, filterTypeOptions[0]),
              }}
              inputProps={inputProps}
              value={date}
              onChange={setDate}
            />
          );
        }}
      </Function>
      <Function>
        {() => {
          const [date, setDate] = useState({ from: currentDay.toDate(), to: currentDay.toDate() });
          const inputProps = { size: 'sm', styleType: 'outlined' };
          return (
            <DatePicker
              inputProps={inputProps}
              value={date}
              onChange={setDate}
              isRangePicker={select('isRangePicker', rangePickerOptions, rangePickerOptions[0])}
              filterConfig={{
                filterType: select('filterType', filterTypeOptions, filterTypeOptions[0]),
              }}
            />
          );
        }}
      </Function>
    </Stack>
  </Story>
</Preview>

# DayPicker Sizes

Implementation of the simple DayPicker on different sizes

<Preview>
  <Story name="DayPicker Sizes" parameters={{ decorators: [withKnobs] }}>
    <Stack>
      <Function>
        {() => {
          const [date, setDate] = useState({ from: undefined, to: undefined });
          const inputProps = { size: 'md', styleType: 'outlined' };
          return (
            <DatePicker
              inputProps={inputProps}
              disableDates={select('disableDates', options, options[0])}
              value={date}
              onChange={setDate}
            />
          );
        }}
      </Function>
      <Function>
        {() => {
          const [date, setDate] = useState({ from: currentDay.toDate(), to: currentDay.toDate() });
          const inputProps = { size: 'sm', styleType: 'outlined' };
          return (
            <DatePicker
              inputProps={inputProps}
              disableDates={select('disableDates', options, options[0])}
              value={date}
              onChange={setDate}
            />
          );
        }}
      </Function>
    </Stack>
  </Story>
</Preview>

# DayPicker Input props

Component can take all the properties of the TextField and styles

<Preview>
  <Story name="DayPicker Input props" parameters={{ decorators: [withKnobs] }}>
    <Stack>
      <Stack>
        <Function>
          {() => {
            const [date, setDate] = useState({
              from: currentDay.toDate(),
              to: currentDay.toDate(),
            });
            return (
              <DatePicker
                disableDates={select('disableDates', options, options[0])}
                value={date}
                onChange={setDate}
              />
            );
          }}
        </Function>
        <Function>
          {() => {
            const [date, setDate] = useState({
              from: currentDay.toDate(),
              to: currentDay.toDate(),
            });
            return (
              <DatePicker
                disableDates={select('disableDates', options, options[0])}
                inputProps={{ styleType: 'outlined' }}
                value={date}
                onChange={setDate}
              />
            );
          }}
        </Function>
        <Function>
          {() => {
            const [date, setDate] = useState({
              from: currentDay.toDate(),
              to: currentDay.toDate(),
            });
            return (
              <DatePicker
                disableDates={select('disableDates', options, options[0])}
                inputProps={{ styleType: 'elevated' }}
                value={date}
                onChange={setDate}
              />
            );
          }}
        </Function>
        <Function>
          {() => {
            const [date, setDate] = useState({
              from: currentDay.toDate(),
              to: currentDay.toDate(),
            });
            return (
              <DatePicker
                disableDates={select('disableDates', options, options[0])}
                inputProps={{ hintMsg: 'Wrong Date', status: 'error' }}
                value={date}
                onChange={setDate}
              />
            );
          }}
        </Function>
        <Function>
          {() => {
            const [date, setDate] = useState({
              from: currentDay.toDate(),
              to: currentDay.toDate(),
            });
            return (
              <DatePicker
                disableDates={select('disableDates', options, options[0])}
                inputProps={{ hintMsg: 'Dates are important', status: 'hint' }}
                value={date}
                onChange={setDate}
              />
            );
          }}
        </Function>
      </Stack>
    </Stack>
  </Story>
</Preview>

# DayPicker with disabled dates

Some disable dates functionality

<Preview>
  <Story name="DayPicker with disabled dates">
    <Stack>
      <Function>
        {() => {
          const [date, setDate] = useState({
            from: currentDay.toDate(),
            to: currentDay.toDate(),
          });
          return <DatePicker disableDates={disableDates} value={date} onChange={setDate} />;
        }}
      </Function>
    </Stack>
  </Story>
</Preview>

# DatePicker with predefined values

This datepicker has a predefined initial value that can be used both for initial definition and to handle values externally

<Preview>
  <Story name="DayPicker with predefined values">
    <Function>
      {() => {
        const [date, setDate] = useState({
          to: mockDate.add(11, 'day').toDate(),
          from: mockDate.add(1, 'day').toDate(),
        });
        return (
          <DatePicker
            isRangePicker
            disableDates={{ daysOfWeek: [1, 2, 3, 4, 5, 6] }}
            value={date}
            onChange={setDate}
          />
        );
      }}
    </Function>
  </Story>
</Preview>

# Reset DatePicker

<Preview>
  <Story name="Reset DatePicker">
    <DatePickerShowcase />
  </Story>
</Preview>

# Dynamic disableDates with all options available and custom label - Knobs

<Preview>
  <Story
    name="Dynamic disableDates with all options available - Knobs"
    parameters={{ decorators: [withKnobs] }}
  >
    <Function>
      {() => {
        const [date, setDate] = useState({
          from: currentDay.toDate(),
          to: currentDay.toDate(),
        });
        return (
          <DatePicker
            disableDates={select('disableDates', options, options[0])}
            inputLabel={text('inputLabel', 'Custom Date')}
            isRangePicker={boolean('isRangePicker', false)}
            value={date}
            onChange={setDate}
          />
        );
      }}
    </Function>
  </Story>
</Preview>
