import { Meta, Preview, Props, Story } from '@storybook/addon-docs';
import { boolean, select, text, withKnobs } from '@storybook/addon-knobs';
import { linkTo } from '@storybook/addon-links';
import TextField from './TextField';
import Stack from '../storyUtils/Stack';
import Icon from '../Icon';
import iconSelector from '../Icon/assets/iconSelector';
import Loader from '../Loader';
import {
  MultiTextFieldShowcase,
  TextFieldShowCase,
} from '../../components/storyUtils/TextFieldShowcases';
import { FIGMA_URL } from '../../utils/common';
import Overview from '../../storybook/Overview';

<Meta
  title="Updated Components/Fields/TextField"
  component={TextField}
  parameters={{
    design: [
      {
        type: 'figma',
        url: `${FIGMA_URL}?node-id=10019%3A116505`,
      },
    ],
  }}
/>

<SectionHeader title={'TextField'} />

- [Overview](#overview)
- [Props](#props)
- [Usage](#usage)
- [Variants](#variants)

## Overview

<Story
  name="Overview"
  parameters={{
    previewTabs: {
      canvas: { hidden: true },
    },
  }}
>
  <Overview>
    A universal TextField component which provides a wide range of features such as statuses, inline
    suffixes such as icons and components, and a multi-input functionality with the help of the Chip
    component.
  </Overview>
</Story>

## Props

<Props of={TextField} />

## Usage

<UsageGuidelines
  guidelines={[
    'When the user needs to enter input in the system in the form of a simple text string (Single TextField) or multiple string values (Multi TextField)',
    'When possible, try to choose input width that is relevant to the content being entered into the input field',
    'Avoid truncating field label and input as much as possible',
  ]}
  policies={['If you need to enter a predefined input from a list, use select instead']}
/>

<Tip>
  When the user needs to enter more than one individual values at a given field that are not
  selected from a predefined list, MultiTextField is more suitable. <br />
  (scroll down for more details)
</Tip>

<SubsectionHeader title="Variants" />

### TextField with Placeholder

Single TextField with or without Placeholder

<Preview>
  <Story name="TextField with Placeholder">
    <Stack>
      <TextField label={'TextField'} />
      <TextField label={'TextField'} placeholder={'Placeholder'} />
    </Stack>
  </Story>
</Preview>

### TextField with Mask option

TextField with mask option. When used, placeholder prop is not available.
The mask rules are the following:

<UsageGuidelines
  guidelines={[
    " '9' => [0-9] (Numeric)",
    " 'a' => [A-Za-z] (Alphabetical)",
    " '*' => [A-Za-z0-9] (Alphanumeric)",
  ]}
/>

<Tip>
  In case number 9 is needed as a constant inside the mask, use '\9'. For example Georgian phone
  number format would be +\9\9\9 999 999999 (example: +999 123 123456){' '}
</Tip>

<Preview>
  <Story name="TextField with Mask option (DontTest)">
    <Stack>
      <TextFieldShowCase
        label="Currency Example"
        mask={'$ 999999'}
        isDisabled={boolean('isDisabled', false)}
        status={{
          type: select('Status', ['error', 'normal', 'read-only'], 'normal'),
          hintMessage: text('Hint/Error message', ''),
        }}
      />
      <TextFieldShowCase
        label="Percentage Example"
        mask={'99,99 %'}
        isDisabled={boolean('isDisabled', false)}
        status={{
          type: select('Status', ['error', 'normal', 'read-only'], 'normal'),
          hintMessage: text('Hint/Error message', ''),
        }}
      />
    </Stack>
  </Story>
</Preview>

### TextField with Icon

TextField with icon options right of the text.

<Preview>
  <Story name="TextField with Icon">
    <Stack>
      <TextField label={'TextField'} suffix={'search'} />
      <TextField label={'TextField'} suffix={'calendarEmpty'} />
    </Stack>
  </Story>
</Preview>

### MultiTextField

MultiTextField enables a user to enter one or individual entries as free text.

<Preview>
  <Story name="MultiTextField">
    <MultiTextFieldShowcase />
  </Story>
</Preview>

### TextField Statuses

TextField with different Statuses.

<Preview>
  <Story name="TextField Statuses" parameters={{ decorators: [withKnobs] }}>
    <Stack>
      <TextField
        label={'Normal'}
        status={{
          type: 'normal',
          hintMessage: text('Normal Message', 'Normal Message'),
        }}
      />
      <TextField
        label={'Error'}
        status={{
          type: 'error',
          hintMessage: text('Error Message', 'Error Message'),
        }}
      />
      <TextField
        label={'Read-only'}
        status={{
          type: 'read-only',
          hintMessage: text('Normal Message', 'Normal Message'),
        }}
      />
    </Stack>
  </Story>
</Preview>

### Disabled TextField

Disabled TextField.

<Preview>
  <Story name="Disabled TextField">
    <Stack>
      <TextField
        isDisabled
        label={'TextField'}
        status={{
          type: 'normal',
          hintMessage: 'This field is disabled',
        }}
      />
    </Stack>
  </Story>
</Preview>

### Playground

<Preview>
  <Story name="Playground" parameters={{ decorators: [withKnobs] }}>
    <Stack>
      <TextFieldShowCase
        label={text('Label', 'TextField')}
        placeholder={text('Placeholder', 'Placeholder')}
        isDisabled={boolean('isDisabled', false)}
        hasSuffix={boolean('hasSuffixIcon', false)}
        suffix={select('Suffix icon name', ['', ...Object.keys(iconSelector)], 'info')}
        status={{
          type: select('Status', ['error', 'normal', 'read-only'], 'normal'),
          hintMessage: text('Hint/Error message', 'Message in Text Field'),
        }}
      />
    </Stack>
  </Story>
</Preview>
